<!-- cache-bust -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hey You üíñ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Fancy script font -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">

<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#ff9a9e,#fad0c4);
  text-align: center;
  margin: 0;
  padding: 20px;
  color: #333;
  overflow: hidden;
}

/* Heart stage */
h1 { margin-top: 40px; }
.heart { font-size: 60px; cursor: pointer; }
button {
  padding: 12px 20px;
  font-size: 18px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  margin: 10px;
}
#yesBtn { background-color:#ff4d6d;color:white; }
#noBtn { background-color:#ccc;position:relative; }
#taunt {
  position: fixed;
  bottom: 20px;
  left: 0;
  right: 0;
  font-size: 18px;
  font-weight: bold;
  color:#5a0f1a;
  text-align:center;
}

/* Stages */
#game,#lockGame,#question,#ending { display:none; }

/* Key stage - FIXED */
#lockArea { 
  position: relative; 
  width: 100%; 
  height: 300px; 
  margin-top:30px; 
}
#lockHeart { 
  font-size:70px; 
  position:absolute; 
  top:100px; 
  left:50%; 
  transform:translateX(-50%); 
}
#key { 
  font-size:50px; 
  position:fixed; /* Changed to fixed for better dragging */
  left:50px; 
  top:200px; 
  cursor:grab; 
  user-select:none; 
  touch-action:none;
  z-index: 10;
}
#key:active {
  cursor:grabbing;
}

/* Simple ending */
#ending {
  opacity: 0;
  animation: fadeInBg 1s forwards;
}

@keyframes fadeInBg {
  to { opacity: 1; }
}

#message {
  font-family: 'Great Vibes', cursive;
  font-size: 64px;
  color: #fff;
  text-shadow: 3px 3px 15px rgba(0,0,0,0.4);
  margin-top: 150px;
  opacity: 0;
  animation: messageAppear 1.5s forwards;
  animation-delay: 0.3s;
}

@keyframes messageAppear {
  0% {
    opacity: 0;
    transform: scale(0.3) translateY(50px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}
</style>
</head>

<body>

<h1 id="intro">Click the heart 5 times üíñ</h1>

<div id="game">
  <div class="heart" onclick="clickHeart()">‚ù§Ô∏è</div>
  <p id="counter">0 / 5</p>
</div>

<div id="lockGame">
  <h1>Unlock the heart üîê</h1>
  <p>Drag the key to the heart</p>
  <div id="lockArea">
    <div id="lockHeart">üîí‚ù§Ô∏è</div>
    <div id="key">üóùÔ∏è</div>
  </div>
</div>

<div id="question">
  <h1>Will you be my Valentine? üíò</h1>
  <button id="yesBtn" onclick="yes()">YES üíñ</button>
  <button id="noBtn" onmouseover="moveNo()">No üôÉ</button>
  <p id="taunt"></p>
</div>

<div id="ending">
  <div id="message">
    I love you sm,<br>my princess üíï
  </div>
</div>

<script>
// Stage 1: Heart click
let clicks=0;
const game=document.getElementById("game");
const intro=document.getElementById("intro");
const counter=document.getElementById("counter");
const lockGame=document.getElementById("lockGame");
const question=document.getElementById("question");
const ending=document.getElementById("ending");
const key=document.getElementById("key");
const heart=document.getElementById("lockHeart");
const taunt=document.getElementById("taunt");
const noBtn=document.getElementById("noBtn");

game.style.display="block";
function clickHeart() {
  clicks++;
  counter.innerText=clicks+" / 5";
  if(clicks>=5){
    game.style.display="none";
    intro.style.display="none";
    lockGame.style.display="block";
  }
}

// Stage 2: Key drag - FIXED VERSION
let dragging=false;

function startDrag(e){
  dragging=true;
  key.style.cursor="grabbing";
  e.preventDefault();
}

function drag(e){
  if(!dragging) return;
  
  const touch = e.touches ? e.touches[0] : e;
  
  // Position key centered on cursor
  key.style.left = (touch.clientX - 25) + "px"; // 25px is roughly half the emoji width
  key.style.top = (touch.clientY - 25) + "px";
  
  checkUnlock();
}

function stopDrag(){ 
  dragging=false;
  key.style.cursor="grab";
}

function checkUnlock(){
  const k=key.getBoundingClientRect();
  const h=heart.getBoundingClientRect();
  if(k.left<h.right && k.right>h.left && k.top<h.bottom && k.bottom>h.top){
    lockGame.style.display="none";
    question.style.display="block";
  }
}

key.addEventListener("mousedown",startDrag);
document.addEventListener("mousemove",drag);
document.addEventListener("mouseup",stopDrag);
key.addEventListener("touchstart",startDrag);
document.addEventListener("touchmove",drag);
document.addEventListener("touchend",stopDrag);

// Stage 3: No button chaos
const tauntsArr=["SIKE üò≠","ABSOLUTELY NOT","NICE TRY THO","YOU REALLY THOUGHT?","NAH UH",
"WRONG ANSWER","TRY AGAIN BUDDY","LMAOOOO","BE SERIOUS","THAT BUTTON IS DECORATIVE",
"NO IS NOT A REAL OPTION","PLEASE BFFR","ALMOST HAD IT","SO CLOSE üòè","DENIED",
"SYSTEM SAYS NO (YOU)","HAHAHA","TRY HARDER","NOT TODAY","üòé BETTER LUCK NEXT TIME"];
function moveNo(){
  noBtn.style.transform=`translate(${Math.random()*300-150}px,${Math.random()*300-150}px)`;
  taunt.innerText=tauntsArr[Math.floor(Math.random()*tauntsArr.length)];
}

// Stage 4: Simple fade in
function yes(){
  question.style.display="none";
  ending.style.display="block";
}
</script>

</body>
</html>

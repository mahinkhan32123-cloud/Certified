<!-- cache-bust -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hey You ğŸ’–</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Fancy script font -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">

<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#ff9a9e,#fad0c4);
  text-align: center;
  margin: 0;
  padding: 20px;
  color: #333;
  overflow: hidden;
}

/* Heart stage */
h1 { margin-top: 40px; }
.heart { font-size: 60px; cursor: pointer; }
button {
  padding: 12px 20px;
  font-size: 18px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  margin: 10px;
}
#yesBtn { background-color:#ff4d6d;color:white; }
#noBtn { background-color:#ccc;position:relative; }
#taunt {
  position: fixed;
  bottom: 20px;
  left: 0;
  right: 0;
  font-size: 18px;
  font-weight: bold;
  color:#5a0f1a;
  text-align:center;
}

/* Stages */
#game,#lockGame,#question,#ending { display:none; }

/* Key stage - FIXED */
#lockArea { 
  position: relative; 
  width: 100%; 
  height: 300px; 
  margin-top:30px; 
}
#lockHeart { 
  font-size:70px; 
  position:absolute; 
  top:100px; 
  left:50%; 
  transform:translateX(-50%); 
}
#key { 
  font-size:50px; 
  position:fixed; /* Changed to fixed for better dragging */
  left:50px; 
  top:200px; 
  cursor:grab; 
  user-select:none; 
  touch-action:none;
  z-index: 10;
}
#key:active {
  cursor:grabbing;
}

/* Beautiful ending transition */
#ending {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg,#ff9a9e,#fad0c4);
  opacity: 0;
  animation: fadeInBg 1s forwards;
}

@keyframes fadeInBg {
  to { opacity: 1; }
}

#heartBurst {
  position: absolute;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.floating-heart {
  position: absolute;
  font-size: 30px;
  animation: floatUp 3s ease-out forwards;
  opacity: 0;
}

@keyframes floatUp {
  0% {
    transform: translateY(0) scale(0);
    opacity: 1;
  }
  50% {
    opacity: 1;
  }
  100% {
    transform: translateY(-400px) scale(1.5);
    opacity: 0;
  }
}

#message {
  font-family: 'Great Vibes', cursive;
  font-size: 48px;
  color: #fff;
  text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
  z-index: 10;
  opacity: 0;
  animation: messageAppear 1s forwards;
  animation-delay: 0.5s;
  padding: 40px;
  background: rgba(255,255,255,0.2);
  border-radius: 20px;
  backdrop-filter: blur(10px);
}

@keyframes messageAppear {
  0% {
    opacity: 0;
    transform: scale(0.5);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

#message .heart-icon {
  display: inline-block;
  animation: heartBeat 1.5s infinite;
}

@keyframes heartBeat {
  0%, 100% { transform: scale(1); }
  25% { transform: scale(1.2); }
  50% { transform: scale(1); }
}
</style>
</head>

<body>

<h1 id="intro">Click the heart 5 times ğŸ’–</h1>

<div id="game">
  <div class="heart" onclick="clickHeart()">â¤ï¸</div>
  <p id="counter">0 / 5</p>
</div>

<div id="lockGame">
  <h1>Unlock the heart ğŸ”</h1>
  <p>Drag the key to the heart</p>
  <div id="lockArea">
    <div id="lockHeart">ğŸ”’â¤ï¸</div>
    <div id="key">ğŸ—ï¸</div>
  </div>
</div>

<div id="question">
  <h1>Will you be my Valentine? ğŸ’˜</h1>
  <button id="yesBtn" onclick="yes()">YES ğŸ’–</button>
  <button id="noBtn" onmouseover="moveNo()">No ğŸ™ƒ</button>
  <p id="taunt"></p>
</div>

<div id="ending">
  <div id="heartBurst"></div>
  <div id="message">
    I love you sm,<br>my princess <span class="heart-icon">ğŸ’•</span>
  </div>
</div>

<script>
// Stage 1: Heart click
let clicks=0;
const game=document.getElementById("game");
const intro=document.getElementById("intro");
const counter=document.getElementById("counter");
const lockGame=document.getElementById("lockGame");
const question=document.getElementById("question");
const ending=document.getElementById("ending");
const key=document.getElementById("key");
const heart=document.getElementById("lockHeart");
const taunt=document.getElementById("taunt");
const noBtn=document.getElementById("noBtn");

game.style.display="block";
function clickHeart() {
  clicks++;
  counter.innerText=clicks+" / 5";
  if(clicks>=5){
    game.style.display="none";
    intro.style.display="none";
    lockGame.style.display="block";
  }
}

// Stage 2: Key drag - FIXED VERSION
let dragging=false;

function startDrag(e){
  dragging=true;
  key.style.cursor="grabbing";
  e.preventDefault();
}

function drag(e){
  if(!dragging) return;
  
  const touch = e.touches ? e.touches[0] : e;
  
  // Position key centered on cursor
  key.style.left = (touch.clientX - 25) + "px"; // 25px is roughly half the emoji width
  key.style.top = (touch.clientY - 25) + "px";
  
  checkUnlock();
}

function stopDrag(){ 
  dragging=false;
  key.style.cursor="grab";
}

function checkUnlock(){
  const k=key.getBoundingClientRect();
  const h=heart.getBoundingClientRect();
  if(k.left<h.right && k.right>h.left && k.top<h.bottom && k.bottom>h.top){
    lockGame.style.display="none";
    question.style.display="block";
  }
}

key.addEventListener("mousedown",startDrag);
document.addEventListener("mousemove",drag);
document.addEventListener("mouseup",stopDrag);
key.addEventListener("touchstart",startDrag);
document.addEventListener("touchmove",drag);
document.addEventListener("touchend",stopDrag);

// Stage 3: No button chaos
const tauntsArr=["SIKE ğŸ˜­","ABSOLUTELY NOT","NICE TRY THO","YOU REALLY THOUGHT?","NAH UH",
"WRONG ANSWER","TRY AGAIN BUDDY","LMAOOOO","BE SERIOUS","THAT BUTTON IS DECORATIVE",
"NO IS NOT A REAL OPTION","PLEASE BFFR","ALMOST HAD IT","SO CLOSE ğŸ˜","DENIED",
"SYSTEM SAYS NO (YOU)","HAHAHA","TRY HARDER","NOT TODAY","ğŸ˜ BETTER LUCK NEXT TIME"];
function moveNo(){
  noBtn.style.transform=`translate(${Math.random()*300-150}px,${Math.random()*300-150}px)`;
  taunt.innerText=tauntsArr[Math.floor(Math.random()*tauntsArr.length)];
}

// Stage 4: Beautiful heart burst transition
function yes(){
  question.style.display="none";
  ending.style.display="flex";
  
  // Create floating hearts
  const heartBurst = document.getElementById("heartBurst");
  const hearts = ['ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸ’“', 'ğŸ’', 'â¤ï¸', 'ğŸ’˜'];
  
  for(let i = 0; i < 20; i++) {
    setTimeout(() => {
      const floatingHeart = document.createElement('div');
      floatingHeart.className = 'floating-heart';
      floatingHeart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
      floatingHeart.style.left = Math.random() * 100 + '%';
      floatingHeart.style.bottom = '0';
      floatingHeart.style.animationDelay = Math.random() * 0.5 + 's';
      heartBurst.appendChild(floatingHeart);
    }, i * 100);
  }
}
</script>

</body>
</html>
